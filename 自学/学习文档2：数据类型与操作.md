# 学习文档2：数据类型与操作

## 1. 基本数据类型

### 1.1 概述
Python中的数据类型可以分为以下几类：
- 数值类型：整数、浮点数、复数
- 序列类型：字符串、列表、元组
- 映射类型：字典
- 集合类型：集合
- 布尔类型：True、False
- 空值类型：None

| 类型 | 描述 | 示例 |
|------|------|------|
| int | 整数 | 10, -5, 0 |
| float | 浮点数 | 3.14, -0.5, 2.0 |
| complex | 复数 | 1+2j, 3-4j |
| str | 字符串 | "hello", 'world' |
| list | 列表 | [1, 2, 3], ["apple", "banana"] |
| tuple | 元组 | (1, 2, 3), ("apple", "banana") |
| dict | 字典 | {"name": "Alice", "age": 20} |
| set | 集合 | {1, 2, 3}, {"apple", "banana"} |
| bool | 布尔值 | True, False |
| NoneType | 空值 | None |

### 1.2 数值类型

#### 整数（int）
整数是没有小数部分的数字，可以是正数、负数或零。Python 3中的整数可以是任意大小，不受机器字长限制。

```python
# 整数示例
x = 10
negative = -5
zero = 0

# 不同进制表示
binary = 0b1010  # 二进制，十进制为10
octal = 0o12  # 八进制，十进制为10
hexadecimal = 0xA  # 十六进制，十进制为10

# 大整数
big_int = 123456789012345678901234567890
```

#### 浮点数（float）
浮点数是带有小数部分的数字，使用IEEE 754标准表示。

```python
# 浮点数示例
x = 3.14
y = -0.5
z = 2.0

# 科学计数法
scientific = 1.23e4  # 1.23 × 10^4 = 12300.0
scientific_negative = 1.23e-4  # 1.23 × 10^-4 = 0.000123
```

#### 复数（complex）
复数由实部和虚部组成，虚部以`j`或`J`结尾。

```python
# 复数示例
x = 1 + 2j
y = 3 - 4j
z = complex(5, 6)  # 使用complex()函数创建

# 获取实部和虚部
print(x.real)  # 1.0
print(x.imag)  # 2.0

# 共轭复数
print(x.conjugate())  # (1-2j)
```

### 1.3 布尔类型（bool）
布尔类型表示真或假，只有两个值：`True`和`False`（注意首字母大写）。

```python
# 布尔值示例
a = True
b = False

# 布尔表达式
x = 10 > 5  # True
y = 10 < 5  # False
z = 10 == 10  # True

# 布尔运算
print(True and False)  # False
print(True or False)  # True
print(not True)  # False

# 其他类型转换为布尔值
print(bool(0))  # False
print(bool(1))  # True
print(bool(""))  # False
print(bool("hello"))  # True
print(bool([]))  # False
print(bool([1, 2, 3]))  # True
print(bool(None))  # False
```

## 2. 字符串操作

### 2.1 字符串的定义
字符串是由字符组成的序列，用于表示文本。Python中的字符串可以使用单引号、双引号或三引号定义。

```python
# 字符串定义
s1 = "Hello"  # 双引号
s2 = 'World'  # 单引号
s3 = """这是一个
多行字符串"""  # 三双引号
s4 = '''这也是一个
多行字符串'''  # 三单引号
```

### 2.2 字符串拼接
字符串可以使用`+`运算符进行拼接。

```python
# 字符串拼接
s1 = "Hello"
s2 = "World"
s3 = s1 + " " + s2  # "Hello World"
print(s3)

# 字符串重复
s4 = s1 * 3  # "HelloHelloHello"
print(s4)
```

### 2.3 字符串索引和切片
字符串是序列类型，支持索引和切片操作。

#### 索引
索引用于访问字符串中的单个字符，Python中的索引从0开始。

```python
s = "Python"
print(s[0])  # 'P' 第一个字符
print(s[1])  # 'y' 第二个字符
print(s[-1])  # 'n' 最后一个字符
print(s[-2])  # 'o' 倒数第二个字符
```

#### 切片
切片用于访问字符串中的一部分，语法为：`s[start:end:step]`，其中：
- `start`：起始索引（包含）
- `end`：结束索引（不包含）
- `step`：步长（默认值为1）

```python
s = "Python"
print(s[1:4])  # 'yth' 从索引1到4（不包含4）
print(s[:3])  # 'Pyt' 从开头到索引3（不包含3）
print(s[3:])  # 'hon' 从索引3到结尾
print(s[::2])  # 'Pto' 步长为2
print(s[::-1])  # 'nohtyP' 倒序
```

### 2.4 字符串方法
字符串提供了丰富的方法，用于字符串的各种操作。

#### 大小写转换
```python
s = "Hello, World!"
print(s.upper())  # "HELLO, WORLD!"
print(s.lower())  # "hello, world!"
print(s.title())  # "Hello, World!"
print(s.capitalize())  # "Hello, world!"
print(s.swapcase())  # "hELLO, wORLD!"
```

#### 去除空白字符
```python
s = "   Hello, World!   "
print(s.strip())  # "Hello, World!" 去除首尾空白
print(s.lstrip())  # "Hello, World!   " 去除左侧空白
print(s.rstrip())  # "   Hello, World!" 去除右侧空白
```

#### 字符串分割和连接
```python
s = "apple,banana,cherry"
print(s.split(","))  # ["apple", "banana", "cherry"]

# 连接字符串
fruits = ["apple", "banana", "cherry"]
print(", ".join(fruits))  # "apple, banana, cherry"
```

#### 字符串替换
```python
s = "Hello, World!"
print(s.replace("World", "Python"))  # "Hello, Python!"

# 替换指定次数
print(s.replace("l", "L", 2))  # "HeLLo, World!" 只替换前2个"l"
```

#### 字符串查找
```python
s = "Hello, World!"
print(s.find("World"))  # 7 查找子字符串的位置
print(s.find("Python"))  # -1 未找到返回-1

print(s.index("World"))  # 7 与find类似，但未找到会抛出异常
# print(s.index("Python"))  # ValueError: substring not found

print(s.count("l"))  # 3 统计子字符串出现的次数
```

#### 字符串判断
```python
s = "Hello123"
print(s.isalpha())  # False 是否只包含字母
print(s.isdigit())  # False 是否只包含数字
print(s.isalnum())  # True 是否只包含字母和数字
print(s.islower())  # False 是否全为小写
print(s.isupper())  # False 是否全为大写
print(s.istitle())  # True 是否首字母大写
print(s.startswith("Hello"))  # True 是否以指定字符串开头
print(s.endswith("123"))  # True 是否以指定字符串结尾
```

## 3. 列表（List）

### 3.1 列表的定义
列表是Python中最常用的数据结构之一，用于存储任意类型的有序集合。列表使用方括号`[]`定义，元素之间用逗号分隔。

```python
# 列表定义
empty_list = []  # 空列表
numbers = [1, 2, 3, 4, 5]  # 整数列表
fruits = ["apple", "banana", "cherry"]  # 字符串列表
mixed = [1, "apple", True, 3.14]  # 混合类型列表
nested = [[1, 2], [3, 4], [5, 6]]  # 嵌套列表
```

### 3.2 列表的基本操作

#### 访问列表元素
列表支持索引和切片操作，与字符串类似。

```python
fruits = ["apple", "banana", "cherry"]
print(fruits[0])  # "apple"
print(fruits[-1])  # "cherry"
print(fruits[1:3])  # ["banana", "cherry"]
print(fruits[::2])  # ["apple", "cherry"]
```

#### 修改列表元素
列表是可变类型，可以修改其中的元素。

```python
fruits = ["apple", "banana", "cherry"]
fruits[1] = "orange"  # 修改元素
print(fruits)  # ["apple", "orange", "cherry"]
```

#### 添加元素
```python
fruits = ["apple", "banana", "cherry"]

# append() 向列表末尾添加一个元素
fruits.append("date")
print(fruits)  # ["apple", "banana", "cherry", "date"]

# insert() 在指定位置插入一个元素
fruits.insert(1, "grape")
print(fruits)  # ["apple", "grape", "banana", "cherry", "date"]

# extend() 向列表末尾添加多个元素
fruits.extend(["elderberry", "fig"])
print(fruits)  # ["apple", "grape", "banana", "cherry", "date", "elderberry", "fig"]
```

#### 删除元素
```python
fruits = ["apple", "banana", "cherry", "date", "elderberry", "fig"]

# remove() 删除指定元素
fruits.remove("banana")
print(fruits)  # ["apple", "cherry", "date", "elderberry", "fig"]

# pop() 删除指定索引的元素，默认删除最后一个
popped = fruits.pop(1)
print(popped)  # "cherry"
print(fruits)  # ["apple", "date", "elderberry", "fig"]

# del 语句删除指定索引的元素
# del fruits[0]
print(fruits)  # ["date", "elderberry", "fig"]

# clear() 清空列表
fruits.clear()
print(fruits)  # []
```

### 3.3 列表方法

#### 排序和反转
```python
numbers = [3, 1, 4, 1, 5, 9, 2, 6]

# sort() 排序（原地修改）
numbers.sort()
print(numbers)  # [1, 1, 2, 3, 4, 5, 6, 9]

# sort() 倒序
numbers.sort(reverse=True)
print(numbers)  # [9, 6, 5, 4, 3, 2, 1, 1]

# sorted() 返回新的排序后的列表，原列表不变
numbers = [3, 1, 4, 1, 5, 9, 2, 6]
sorted_numbers = sorted(numbers)
print(sorted_numbers)  # [1, 1, 2, 3, 4, 5, 6, 9]
print(numbers)  # [3, 1, 4, 1, 5, 9, 2, 6]

# reverse() 反转列表（原地修改）
numbers.reverse()
print(numbers)  # [6, 2, 9, 5, 1, 4, 1, 3]

# reversed() 返回反转后的迭代器
reversed_numbers = list(reversed(numbers))
print(reversed_numbers)  # [3, 1, 4, 1, 5, 9, 2, 6]
```

#### 其他常用方法
```python
numbers = [1, 2, 3, 4, 5, 3, 3]
print(len(numbers))  # 7 列表长度
print(numbers.count(3))  # 3 元素出现次数
print(numbers.index(3))  # 2 元素第一次出现的索引
print(3 in numbers)  # True 元素是否在列表中
print(6 in numbers)  # False 元素是否不在列表中
```

### 3.4 列表推导式
列表推导式是一种简洁创建列表的方式，语法为：`[expression for item in iterable if condition]`。

```python
# 创建平方列表
numbers = [1, 2, 3, 4, 5]
squares = [x**2 for x in numbers]
print(squares)  # [1, 4, 9, 16, 25]

# 带条件的列表推导式
evens = [x for x in numbers if x % 2 == 0]
print(evens)  # [2, 4]

# 嵌套列表推导式
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
flattened = [x for row in matrix for x in row]
print(flattened)  # [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

## 4. 元组（Tuple）

### 4.1 元组的定义
元组与列表类似，也是有序集合，但元组是不可变的，即创建后不能修改。元组使用圆括号`()`定义，元素之间用逗号分隔。

```python
# 元组定义
empty_tuple = ()  # 空元组
numbers = (1, 2, 3, 4, 5)  # 整数元组
fruits = ("apple", "banana", "cherry")  # 字符串元组
mixed = (1, "apple", True, 3.14)  # 混合类型元组
nested = ((1, 2), (3, 4), (5, 6))  # 嵌套元组

# 单个元素的元组，必须加逗号
single_tuple = (1,)  # 正确
# single_tuple = (1)  # 错误，会被解释为整数1
```

### 4.2 元组的基本操作
元组支持索引和切片操作，与列表类似，但不支持修改。

```python
t = (1, 2, 3, 4, 5)
print(t[0])  # 1
print(t[-1])  # 5
print(t[1:4])  # (2, 3, 4)
print(t[::2])  # (1, 3, 5)
```

### 4.3 元组的方法
元组的方法较少，主要有：

```python
t = (1, 2, 3, 4, 5, 3, 3)
print(len(t))  # 7 元组长度
print(t.count(3))  # 3 元素出现次数
print(t.index(3))  # 2 元素第一次出现的索引
print(3 in t)  # True 元素是否在元组中
```

### 4.4 元组的应用场景
- 保护数据不被修改
- 作为字典的键（因为元组是不可变的）
- 从函数返回多个值
- 用于交换变量值

```python
# 作为字典的键
d = {(1, 2): "value"}  # 正确
# d = {[1, 2]: "value"}  # 错误，列表是可变的，不能作为字典的键

# 从函数返回多个值
def calculate(a, b):
    return a + b, a - b, a * b, a / b

add, sub, mul, div = calculate(10, 2)  # 元组解包
print(add, sub, mul, div)  # 12 8 20 5.0

# 交换变量值
a, b = 1, 2
a, b = b, a  # 元组解包交换
print(a, b)  # 2 1
```

## 5. 字典（Dictionary）

### 5.1 字典的定义
字典是一种键值对（key-value）数据结构，用于存储映射关系。字典使用大括号`{}`定义，键值对之间用逗号分隔，键和值之间用冒号`:`分隔。

```python
# 字典定义
empty_dict = {}  # 空字典
person = {"name": "Alice", "age": 20, "city": "Beijing"}  # 字典

# 使用dict()函数创建字典
person2 = dict(name="Bob", age=25, city="Shanghai")
person3 = dict([("name", "Charlie"), ("age", 30), ("city", "Guangzhou")])
```

### 5.2 字典的基本操作

#### 访问值
可以使用键来访问字典中的值，也可以使用`get()`方法。

```python
person = {"name": "Alice", "age": 20, "city": "Beijing"}
print(person["name"])  # "Alice"
print(person.get("age"))  # 20
print(person.get("gender", "未知"))  # "未知" 键不存在时返回默认值
```

#### 修改值
可以通过键来修改字典中的值。

```python
person = {"name": "Alice", "age": 20, "city": "Beijing"}
person["age"] = 21  # 修改值
print(person)

person["gender"] = "female"  # 添加新键值对
print(person)
```

#### 删除键值对
```python
person = {"name": "Alice", "age": 20, "city": "Beijing", "gender": "female"}

# del 语句删除指定键值对
del person["gender"]
print(person)

# pop() 方法删除指定键值对并返回值
gender = person.pop("gender", "未知")  # 键不存在时返回默认值
print(gender)
print(person)

# popitem() 方法删除最后一个键值对并返回
last_item = person.popitem()
print(last_item)
print(person)

# clear() 方法清空字典
person.clear()
print(person)
```

### 5.3 字典方法

#### 访问键、值和键值对
```python
person = {"name": "Alice", "age": 20, "city": "Beijing"}

# keys() 获取所有键
print(person.keys())  # dict_keys(['name', 'age', 'city'])

# values() 获取所有值
print(person.values())  # dict_values(['Alice', 20, 'Beijing'])

# items() 获取所有键值对
print(person.items())  # dict_items([('name', 'Alice'), ('age', 20), ('city', 'Beijing')])

# 遍历字典
for key in person:
    print(key, person[key])

for key, value in person.items():
    print(key, value)
```

#### 更新字典
```python
d1 = {"name": "Alice", "age": 20}
d2 = {"city": "Beijing", "gender": "female"}

# update() 方法更新字典
d1.update(d2)
print(d1)  # {"name": "Alice", "age": 20, "city": "Beijing", "gender": "female"}
```

### 5.4 字典推导式
字典推导式是一种简洁创建字典的方式，语法为：`{key: value for item in iterable if condition}`。

```python
# 创建平方字典
numbers = [1, 2, 3, 4, 5]
squares = {x: x**2 for x in numbers}
print(squares)  # {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}

# 带条件的字典推导式
even_squares = {x: x**2 for x in numbers if x % 2 == 0}
print(even_squares)  # {2: 4, 4: 16}

# 交换字典的键值对
original = {"a": 1, "b": 2, "c": 3}
swapped = {v: k for k, v in original.items()}
print(swapped)  # {1: "a", 2: "b", 3: "c"}
```

## 6. 集合（Set）

### 6.1 集合的定义
集合是一种无序、不重复的数据结构，用于存储唯一元素。集合使用大括号`{}`定义，元素之间用逗号分隔。

```python
# 集合定义
empty_set = set()  # 空集合，不能使用{}
numbers = {1, 2, 3, 4, 5}  # 整数集合
fruits = {"apple", "banana", "cherry"}  # 字符串集合
mixed = {1, "apple", True, 3.14}  # 混合类型集合

# 从列表创建集合（自动去重）
duplicate_list = [1, 2, 2, 3, 3, 4, 5, 5]
unique_set = set(duplicate_list)
print(unique_set)  # {1, 2, 3, 4, 5}
```

### 6.2 集合的基本操作

#### 添加元素
```python
fruits = {"apple", "banana", "cherry"}

# add() 添加单个元素
fruits.add("date")
print(fruits)

# update() 添加多个元素
fruits.update(["elderberry", "fig"])
print(fruits)
```

#### 删除元素
```python
fruits = {"apple", "banana", "cherry", "date", "elderberry", "fig"}

# remove() 删除指定元素，如果元素不存在会报错
fruits.remove("banana")
print(fruits)
# fruits.remove("grape")  # KeyError: 'grape'

# discard() 删除指定元素，如果元素不存在不会报错
fruits.discard("cherry")
print(fruits)
fruits.discard("grape")  # 不会报错

# pop() 删除任意元素并返回
removed = fruits.pop()
print(removed)
print(fruits)

# clear() 清空集合
fruits.clear()
print(fruits)
```

### 6.3 集合的运算
集合支持多种数学运算，如并集、交集、差集等。

```python
set1 = {1, 2, 3, 4, 5}
set2 = {4, 5, 6, 7, 8}

# 并集：所有元素
print(set1 | set2)  # {1, 2, 3, 4, 5, 6, 7, 8}
print(set1.union(set2))

# 交集：共同元素
print(set1 & set2)  # {4, 5}
print(set1.intersection(set2))

# 差集：set1中独有的元素
print(set1 - set2)  # {1, 2, 3}
print(set1.difference(set2))

# 对称差集：两个集合中独有的元素
print(set1 ^ set2)  # {1, 2, 3, 6, 7, 8}
print(set1.symmetric_difference(set2))

# 子集
set3 = {1, 2, 3}
print(set3.issubset(set1))  # True

# 超集
print(set1.issuperset(set3))  # True
```

### 6.4 集合推导式
集合推导式是一种简洁创建集合的方式，语法为：`{expression for item in iterable if condition}`。

```python
# 创建平方集合
numbers = [1, 2, 3, 4, 5]
squares = {x**2 for x in numbers}
print(squares)  # {1, 4, 9, 16, 25}

# 带条件的集合推导式
evens = {x for x in numbers if x % 2 == 0}
print(evens)  # {2, 4}

# 去重
duplicates = [1, 2, 2, 3, 3, 4, 5, 5]
unique = {x for x in duplicates}
print(unique)  # {1, 2, 3, 4, 5}
```

## 7. 实践指导

### 7.1 选择合适的数据类型
| 数据类型 | 特点 | 应用场景 |
|----------|------|----------|
| 列表 | 有序、可变 | 存储多个相关元素，需要频繁修改 |
| 元组 | 有序、不可变 | 存储多个相关元素，不需要修改 |
| 字典 | 键值对、无序 | 存储映射关系，需要通过键快速访问值 |
| 集合 | 无序、不重复 | 存储唯一元素，需要进行集合运算 |

### 7.2 常见错误和解决方法

#### 类型错误（TypeError）
**错误示例**：
```python
fruits = ["apple", "banana", "cherry"]
fruits[0] = 123  # 可以修改列表中的元素
t = ("apple", "banana", "cherry")
t[0] = 123  # 元组是不可变的，不能修改元素
```

**解决方法**：根据数据是否需要修改，选择合适的数据类型。

#### 键错误（KeyError）
**错误示例**：
```python
person = {"name": "Alice", "age": 20}
print(person["gender"])  # 键不存在
```

**解决方法**：使用`get()`方法访问字典中的值，设置默认值。

#### 索引错误（IndexError）
**错误示例**：
```python
numbers = [1, 2, 3]
print(numbers[5])  # 索引超出范围
```

**解决方法**：确保索引在有效范围内，或使用切片操作。

## 8. 总结

本章节介绍了Python的数据类型与操作，包括：
- 基本数据类型：整数、浮点数、复数、布尔值、空值
- 序列类型：字符串、列表、元组
- 映射类型：字典
- 集合类型：集合
- 各数据类型的基本操作和方法
- 列表推导式、字典推导式、集合推导式
- 实践指导

通过学习这些数据类型和操作，你已经掌握了Python编程的核心数据结构，可以开始编写更复杂的程序了。接下来，我们将学习Python的控制流与函数，进一步提升你的编程能力。