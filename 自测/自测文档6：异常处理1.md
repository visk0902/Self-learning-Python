# 自测文档6：异常处理1

## 一、选择题（共20题，每题2分）

1. 以下哪个关键字用于捕获和处理异常？（ ）
   A. try-except
   B. with
   C. for
   D. while

2. 以下哪个是所有异常的基类？（ ）
   A. Exception
   B. BaseException
   C. Error
   D. RuntimeError

3. 以下哪个异常表示除零错误？（ ）
   A. ValueError
   B. TypeError
   C. ZeroDivisionError
   D. NameError

4. 以下哪个异常表示值不匹配？（ ）
   A. ValueError
   B. TypeError
   C. ZeroDivisionError
   D. NameError

5. 以下哪个异常表示类型不匹配？（ ）
   A. ValueError
   B. TypeError
   C. ZeroDivisionError
   D. NameError

6. 以下哪个关键字用于抛出异常？（ ）
   A. try
   B. except
   C. raise
   D. finally

7. 以下哪个关键字用于断言某个条件为真？（ ）
   A. assert
   B. raise
   C. try
   D. except

8. 以下哪个子句用于在没有异常发生时执行？（ ）
   A. try
   B. except
   C. else
   D. finally

9. 以下哪个子句用于无论是否发生异常都会执行？（ ）
   A. try
   B. except
   C. else
   D. finally

10. 以下哪个异常表示文件不存在？（ ）
    A. FileNotFoundError
    B. IOError
    C. PermissionError
    D. UnicodeDecodeError

11. 以下哪个异常表示访问字典中不存在的键？（ ）
    A. IndexError
    B. KeyError
    C. AttributeError
    D. NameError

12. 以下哪个异常表示访问列表中超出范围的索引？（ ）
    A. IndexError
    B. KeyError
    C. AttributeError
    D. NameError

13. 以下哪个异常表示访问未定义的变量？（ ）
    A. IndexError
    B. KeyError
    C. AttributeError
    D. NameError

14. 以下哪个异常表示访问对象不存在的属性？（ ）
    A. IndexError
    B. KeyError
    C. AttributeError
    D. NameError

15. 以下哪个是自定义异常的正确继承方式？（ ）
    A. class MyException:
    B. class MyException(BaseException):
    C. class MyException(Exception):
    D. class MyException=Exception:

16. 以下哪个语句用于重新抛出异常？（ ）
    A. raise exception
    B. raise
    C. throw
    D. throw exception

17. 以下哪个是处理多个异常的正确语法？（ ）
    A. except Exception1, Exception2:
    B. except (Exception1, Exception2):
    C. except Exception1 and Exception2:
    D. except Exception1 or Exception2:

18. 以下哪个是获取异常信息的正确方式？（ ）
    A. except Exception as e:
    B. except Exception e:
    C. except Exception(e):
    D. except Exception=e:

19. 以下哪个是异常处理的最佳实践？（ ）
    A. 捕获所有异常
    B. 只捕获必要的异常
    C. 不提供错误信息
    D. 使用异常控制程序流程

20. 以下哪个语句用于自动管理资源？（ ）
    A. try-except-finally
    B. with
    C. for
    D. while

## 二、填空题（共20题，每题2分）

1. 异常是指程序在______过程中发生的错误。
2. Python中的异常是一个______，表示程序执行过程中发生的错误。
3. 所有非系统退出异常的基类是______。
4. 用于捕获和处理异常的语句是______。
5. 用于在没有异常发生时执行的子句是______。
6. 用于无论是否发生异常都会执行的子句是______。
7. 用于抛出异常的关键字是______。
8. 用于断言某个条件为真的关键字是______。
9. 除零错误对应的异常类型是______。
10. 值不匹配对应的异常类型是______。
11. 类型不匹配对应的异常类型是______。
12. 文件不存在对应的异常类型是______。
13. 访问字典中不存在的键对应的异常类型是______。
14. 访问列表中超出范围的索引对应的异常类型是______。
15. 访问未定义的变量对应的异常类型是______。
16. 访问对象不存在的属性对应的异常类型是______。
17. 自定义异常类应继承______类或其子类。
18. 用于重新抛出异常的语句是______。
19. 用于自动管理资源的语句是______。
20. 异常处理的最佳实践是______。

## 三、简答题（共4题，每题5分）

1. 简述异常处理的基本语法和流程。
2. 简述try-except-else-finally语句中各部分的作用。
3. 简述自定义异常的创建方法和应用场景。
4. 简述异常处理的最佳实践。

## 四、编程题（共2题，每题10分）

1. 编写程序，实现一个函数，接收一个整数列表，返回列表中所有元素的平均值。要求处理可能出现的异常，如空列表、非数值元素等。
2. 编写程序，实现一个自定义异常类，用于表示无效的年龄（小于0或大于150）。然后编写一个函数，接收一个年龄值，检查是否有效，无效则抛出自定义异常。

---

# 参考答案

## 一、选择题

1. A
2. B
3. C
4. A
5. B
6. C
7. A
8. C
9. D
10. A
11. B
12. A
13. D
14. C
15. C
16. B
17. B
18. A
19. B
20. B

## 二、填空题

1. 执行
2. 对象
3. Exception
4. try-except
5. else
6. finally
7. raise
8. assert
9. ZeroDivisionError
10. ValueError
11. TypeError
12. FileNotFoundError
13. KeyError
14. IndexError
15. NameError
16. AttributeError
17. Exception
18. raise
19. with
20. 只捕获必要的异常，提供详细的错误信息

## 三、简答题

1. **异常处理的基本语法和流程**：
   - 基本语法：使用`try-except`语句捕获和处理异常
   - 流程：
     1. 执行`try`块中的代码
     2. 如果发生异常，检查`except`块中是否有匹配的异常类型
     3. 如果有匹配的异常类型，执行对应的`except`块中的代码
     4. 如果没有异常发生，执行`else`块中的代码（如果存在）
     5. 无论是否发生异常，执行`finally`块中的代码（如果存在）

2. **try-except-else-finally语句中各部分的作用**：
   - `try`：包含可能会抛出异常的代码块
   - `except`：捕获和处理`try`块中抛出的异常
   - `else`：在`try`块中没有异常发生时执行的代码
   - `finally`：无论是否发生异常都会执行的代码，通常用于释放资源

3. **自定义异常的创建方法和应用场景**：
   - 创建方法：通过继承内置的`Exception`类或其他异常类来创建自定义异常类
   - 应用场景：
     - 表示特定业务逻辑的错误
     - 提供更详细的错误信息
     - 区分不同类型的错误，便于针对性处理
     - 增强代码的可读性和可维护性

4. **异常处理的最佳实践**：
   - 只捕获必要的异常，不要捕获所有异常
   - 提供详细的错误信息
   - 避免使用异常来控制程序流程
   - 使用`finally`或`with`语句释放资源
   - 记录异常信息
   - 向上抛出无法处理的异常

## 四、编程题

1. **计算列表中元素的平均值，处理异常**：

```python
def calculate_average(numbers):
    """计算列表中所有元素的平均值，处理可能出现的异常"""
    try:
        if not numbers:  # 检查列表是否为空
            raise ValueError("列表不能为空")
        
        total = 0
        count = 0
        for num in numbers:
            # 检查元素是否为数值类型
            if not isinstance(num, (int, float)):
                raise TypeError(f"列表中的元素 {num} 不是数值类型")
            total += num
            count += 1
        
        average = total / count
        return average
    except ValueError as e:
        print(f"错误：{e}")
        return None
    except TypeError as e:
        print(f"错误：{e}")
        return None
    except Exception as e:
        print(f"未知错误：{e}")
        return None

# 测试函数
# 测试用例1：正常列表
numbers1 = [1, 2, 3, 4, 5]
average1 = calculate_average(numbers1)
print(f"列表 {numbers1} 的平均值：{average1}")

# 测试用例2：空列表
numbers2 = []
average2 = calculate_average(numbers2)
print(f"列表 {numbers2} 的平均值：{average2}")

# 测试用例3：包含非数值元素的列表
numbers3 = [1, 2, "3", 4, 5]
average3 = calculate_average(numbers3)
print(f"列表 {numbers3} 的平均值：{average3}")
```

2. **自定义异常处理无效年龄**：

```python
# 自定义异常类
class InvalidAgeError(Exception):
    """表示无效年龄的异常"""
    def __init__(self, age):
        self.age = age
        super().__init__(f"错误：无效的年龄 {age}，年龄必须在0到150之间")

def check_age(age):
    """检查年龄是否有效，无效则抛出自定义异常"""
    try:
        # 检查age是否为数值类型
        if not isinstance(age, (int, float)):
            raise TypeError("年龄必须是数值类型")
        
        # 检查年龄是否在有效范围内
        if age < 0 or age > 150:
            raise InvalidAgeError(age)
        
        print(f"年龄 {age} 有效")
        return True
    except TypeError as e:
        print(f"错误：{e}")
        return False
    except InvalidAgeError as e:
        print(f"错误：{e}")
        return False
    except Exception as e:
        print(f"未知错误：{e}")
        return False

# 测试函数
# 测试用例1：有效年龄
check_age(25)

# 测试用例2：无效年龄（小于0）
check_age(-5)

# 测试用例3：无效年龄（大于150）
check_age(200)

# 测试用例4：非数值类型
check_age("30")
```