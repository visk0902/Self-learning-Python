# 自测文档5：文件操作2

## 一、选择题（共20题，每题2分）

1. 以下关于Python文件操作的描述，错误的是（ ）
A. 文件操作需要先打开文件
B. 文件操作完成后需要关闭文件
C. 可以使用with语句自动管理文件关闭
D. 所有文件都可以用同一模式打开

2. 以下哪个模式用于以只读方式打开文本文件？（ ）
A. 'r'
B. 'w'
C. 'a'
D. 'b'

3. 以下哪个模式用于以二进制方式打开文件？（ ）
A. 't'
B. 'b'
C. 'r+'
D. 'w+'

4. 关于with语句，以下描述正确的是（ ）
A. with语句可以自动管理资源，如文件关闭
B. with语句只能用于文件操作
C. with语句不能嵌套使用
D. with语句必须显式调用close()方法

5. 以下哪个方法用于读取文件的全部内容？（ ）
A. read()
B. readline()
C. readlines()
D. write()

6. 以下哪个方法用于读取文件的一行内容？（ ）
A. read()
B. readline()
C. readlines()
D. write()

7. 以下哪个方法用于读取文件的所有行并返回列表？（ ）
A. read()
B. readline()
C. readlines()
D. write()

8. 以下哪个方法用于写入文件内容？（ ）
A. read()
B. readline()
C. readlines()
D. write()

9. 以下关于文件指针的描述，错误的是（ ）
A. 文件指针指向当前读写位置
B. 可以使用tell()方法获取文件指针位置
C. 可以使用seek()方法移动文件指针
D. 文件指针位置不可改变

10. 以下哪个函数用于获取文件的大小？（ ）
A. os.path.getsize()
B. os.path.exists()
C. os.path.isfile()
D. os.path.isdir()

11. 以下哪个函数用于检查文件是否存在？（ ）
A. os.path.getsize()
B. os.path.exists()
C. os.path.isfile()
D. os.path.isdir()

12. 以下哪个函数用于检查路径是否为文件？（ ）
A. os.path.getsize()
B. os.path.exists()
C. os.path.isfile()
D. os.path.isdir()

13. 以下哪个函数用于检查路径是否为目录？（ ）
A. os.path.getsize()
B. os.path.exists()
C. os.path.isfile()
D. os.path.isdir()

14. 以下哪个函数用于删除文件？（ ）
A. os.remove()
B. os.rmdir()
C. shutil.rmtree()
D. os.unlink()

15. 以下哪个函数用于删除目录？（ ）
A. os.remove()
B. os.rmdir()
C. shutil.copy()
D. os.mkdir()

16. 以下哪个函数用于复制文件？（ ）
A. shutil.copy()
B. shutil.move()
C. shutil.rmtree()
D. os.rename()

17. 以下哪个函数用于移动文件或目录？（ ）
A. shutil.copy()
B. shutil.move()
C. shutil.rmtree()
D. os.rename()

18. 以下哪个函数用于获取文件的修改时间？（ ）
A. os.path.getmtime()
B. os.path.getctime()
C. os.path.getatime()
D. os.path.exists()

19. 以下关于文件编码的描述，错误的是（ ）
A. 文件编码用于指定文件的字符集
B. 可以在open()函数中使用encoding参数指定编码
C. 默认编码是UTF-8
D. 所有文件都必须指定编码

20. 以下哪个函数用于遍历目录中的所有文件和子目录？（ ）
A. os.walk()
B. os.listdir()
C. os.getcwd()
D. os.chdir()

## 二、填空题（共20题，每题2分）

1. 打开文件使用______函数。

2. 关闭文件使用______方法。

3. with语句可以自动管理______，如文件关闭。

4. 以只读方式打开文本文件的模式是______。

5. 以写入方式打开文本文件的模式是______。

6. 以追加方式打开文本文件的模式是______。

7. 以二进制方式打开文件需要在模式后添加______。

8. 读取文件全部内容使用______方法。

9. 读取文件一行内容使用______方法。

10. 读取文件所有行并返回列表使用______方法。

11. 写入文件内容使用______方法。

12. 获取文件指针位置使用______方法。

13. 移动文件指针位置使用______方法。

14. 检查文件是否存在使用______函数。

15. 获取文件大小使用______函数。

16. 删除文件使用______函数。

17. 删除目录使用______函数。

18. 复制文件使用______模块的______函数。

19. 移动文件或目录使用______模块的______函数。

20. 遍历目录中的所有文件和子目录使用______函数。

## 三、简答题（共4题，每题5分）

1. 简述Python文件操作的基本流程。

2. 简述不同文件打开模式的区别。

3. 简述with语句的优点。

4. 简述文件指针的作用和操作方法。

## 四、实践操作题（共2题，每题10分）

1. 编写程序，读取一个文本文件的内容，统计其中每个单词出现的次数，并将结果写入另一个文件。

2. 编写程序，遍历指定目录下的所有文件，将其中的.txt文件复制到另一个目录。

# 参考答案

## 一、选择题

1. D 2. A 3. B 4. A 5. A 6. B 7. C 8. D 9. D 10. A
11. B 12. C 13. D 14. A 15. B 16. A 17. B 18. A 19. D 20. A

## 二、填空题

1. open 2. close 3. 资源 4. 'r' 5. 'w' 6. 'a' 7. 'b' 8. read() 9. readline() 10. readlines() 11. write() 12. tell() 13. seek() 14. os.path.exists() 15. os.path.getsize() 16. os.remove() 17. os.rmdir() 18. shutil copy() 19. shutil move() 20. os.walk()

## 三、简答题

1. Python文件操作的基本流程：
   - 打开文件：使用open()函数打开文件，返回文件对象
   - 操作文件：使用文件对象的方法进行读写操作
   - 关闭文件：使用close()方法关闭文件，释放资源
   - 或者使用with语句自动管理文件关闭

2. 不同文件打开模式的区别：
   - 'r'：只读模式，文件不存在则报错
   - 'w'：写入模式，文件不存在则创建，存在则清空内容
   - 'a'：追加模式，文件不存在则创建，存在则在末尾追加内容
   - 'x'：独占写入模式，文件存在则报错
   - 'b'：二进制模式，用于处理二进制文件
   - 't'：文本模式，用于处理文本文件（默认）
   - '+'：读写模式，与其他模式组合使用

3. with语句的优点：
   - 自动管理资源，如文件关闭
   - 即使发生异常，也能确保资源被正确释放
   - 代码更简洁，可读性更高
   - 可以嵌套使用

4. 文件指针的作用和操作方法：
   - 作用：指示当前文件的读写位置
   - 操作方法：
     - tell()：获取当前文件指针位置
     - seek(offset, whence)：移动文件指针
       - offset：偏移量
       - whence：起始位置，0表示文件开头，1表示当前位置，2表示文件末尾

## 四、实践操作题

1. 统计单词出现次数并写入文件：
```python
def count_words(input_file, output_file):
    word_count = {}
    
    # 读取文件内容
    with open(input_file, 'r', encoding='utf-8') as f:
        content = f.read()
    
    # 统计单词出现次数
    words = content.split()
    for word in words:
        # 去除标点符号
        word = word.strip('.,!?;:"()[]{}')
        word = word.lower()
        if word:
            word_count[word] = word_count.get(word, 0) + 1
    
    # 将结果写入文件
    with open(output_file, 'w', encoding='utf-8') as f:
        f.write("单词出现次数统计结果：\n")
        f.write("-" * 30 + "\n")
        for word, count in sorted(word_count.items(), key=lambda x: x[1], reverse=True):
            f.write(f"{word}: {count}\n")

# 测试
count_words('input.txt', 'output.txt')
```

2. 复制指定目录下的所有.txt文件：
```python
import os
import shutil

def copy_txt_files(source_dir, target_dir):
    # 确保目标目录存在
    if not os.path.exists(target_dir):
        os.makedirs(target_dir)
    
    # 遍历源目录
    for file_name in os.listdir(source_dir):
        source_path = os.path.join(source_dir, file_name)
        # 检查是否为.txt文件
        if os.path.isfile(source_path) and file_name.endswith('.txt'):
            target_path = os.path.join(target_dir, file_name)
            shutil.copy(source_path, target_path)
            print(f"已复制：{file_name} -> {target_path}")

# 测试
copy_txt_files('source', 'target')
```